{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Basquet-Central\\\\Basquet-Central\\\\frontend\\\\src\\\\components\\\\Canvas.jsx\";\nimport React from 'react';\nimport '../App.css';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport { getPixeles, addPixel } from '../services/pixeles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleModalDataClose = () => {\n      this.showDataModal = false;\n    };\n\n    this.handleModalDataShow = () => {\n      this.showDataModal = true;\n    };\n\n    this.canvasRef = /*#__PURE__*/React.createRef();\n    this.showDataModal = false;\n    this.showFormModal = false;\n    this.state = {\n      selectedPixel: [],\n      pixelesPintados: [],\n      datapixel: [],\n      overBlock: '',\n      imgRepit: [],\n      datoMostrar: 'aasdasdasd'\n    };\n  }\n\n  drawBoard(context) {\n    for (var x = 0; x < 840; x++) {\n      context.moveTo(x * 30, 0);\n      context.lineTo(x * 30, 540);\n    }\n\n    for (var y = 0; y < 540; y++) {\n      context.moveTo(0, 30 * y);\n      context.lineTo(840, 30 * y);\n    }\n\n    context.strokeStyle = \"white\";\n    context.stroke();\n  }\n\n  async componentDidMount() {\n    const canvas = this.refs.canvasRef;\n    const context = canvas.getContext('2d'); // Fix to make lines *not* blurry\n\n    context.translate(0.5, 0.5);\n    this.drawBoard(context);\n    var background = new Image();\n    background.src = 'https://previews.123rf.com/images/tonygers/tonygers1401/tonygers140100028/25082143-una-vista-a%C3%A9rea-de-una-cancha-de-baloncesto-completan-con-las-marcas-.jpg';\n\n    background.onload = () => {\n      context.drawImage(background, 0, 0);\n      this.drawBoard(context);\n    };\n\n    let pixeles = await getPixeles();\n    let midata = \"\";\n    pixeles.forEach(doc => {\n      this.state.pixelesPintados.push(doc.id);\n      let resultado = doc.id.split(\",\");\n      this.state.imgRepit.push(doc.data().info.imagen);\n      midata = doc.id + ':' + JSON.stringify(doc.data());\n      let separar = midata.split(\":\");\n      console.log(separar);\n      this.state.datapixel.push(separar);\n\n      if (doc.data().info.imagen) {\n        var img = doc.data().info.imagen;\n        var background = new Image();\n        background.src = img;\n\n        background.onload = () => {\n          context.drawImage(background, resultado[0] * 30, resultado[1] * 30, 30, 30);\n        };\n      }\n\n      context.fillRect(resultado[0] * 30, resultado[1] * 30, 30, 30);\n    });\n    var background = new Image();\n    background.src = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAHwAwQMBIgACEQEDEQH/xAAZAAADAQEBAAAAAAAAAAAAAAABAgMABAb/xAAiEAEBAAIBBQADAQEAAAAAAAAAAQISEQMEExRRIUFhMZH/xAAYAQEBAQEBAAAAAAAAAAAAAAAAAQIGBf/EABcRAQEBAQAAAAAAAAAAAAAAAAARIQH/2gAMAwEAAhEDEQA/APSMzOFe8zM35UYRmJuOREx4PMRmIJ8NqroOiCWozD6rMBuNv6VKhZy2q+oXBFqGrcLaBoCXAK3ELiCbHuIcKtKzflvyFZhAGZmQZhGQShweQZD4xQvHIzE8xPMRkkxNMVJieYIlS0HRaYfw0wEqGjaOjQ2gVy6No6tA0CuW4Ben+HVoW4KVy3AtwdNxLcUWua4kuLpuJLiNVC48hZwrlCWKJ0D2F4FBmZFMeQMZ/wAOrI4w8hcVIA4xSQMVMUZ6OMPji2KkVkJiaYGxh5EZJMB0VkNqiVHQNF9S2BULiS4r2FsVXPcSZRfKEsGnPYTKL5RLKC8SsTyiuRMhpKwilLxyKVh0rKtHnk0TlPKIpipEZVMagtifFKU8yGe8XxPjUMclJkMrynlc8yPMiI6JR2QmY7EZi+xbUtg3Qh7SWluRbkq8G0mVC5EyyFDKp0bkS0a4WkyHKktGgpKNpLRW5YGFYZSiKeVTGoy8G25qpF9jTJzzI0yRI6ZkaZuaZGmYzHVMzTNy7jMxI6vIO7l3HcI6dw3c+7bhF7mW5o3Pgu4Ra5EuSdzJcxYpciZZEuQc8qsNaTK8Bci2itaDAKIMwrMIBWEG5Qo7DMi8sIfk0vCf+NypFdhmSPLcoRbcd0OW5BeZtvwjMrP8bZUitzDZLluRYpci3InLIQ1yDb8hy3ICDcsKzM3HNWFZjagQrq9aU07XEZ1DeQY0J2uHyGnadP5G8ozqozoztOn8h52mE/UJOsPnDVPU6d/UH0+l8ifnHziarOy6XyGnY9L5EZ3Fb2ENW9Lo/IPo9H5Eb3HAeyJOr+j0fkb0ul8iHst7ITq17LpfIW9l0vkT9hvY/qrpvT6XyBez6XyF9gPOGt6fT+QL2nT+RvOF6wuhe06fyEvaYfIfzB5g0nq4lvbSf4peqXyKt6n6/wDWU8jIuuXa/W3pGGoff+jvU8QUW3byIshFvJfreS/UWCLTqX6bycfv8oSspFfJfreS/UWCLeS/W8l+oshFvJfreS/UWUi3kreS/UWQi3kbdFv2pFfJ/W3ToIRTettSMEPtfrEAWP/Z';\n\n    background.onload = () => {\n      context.drawImage(background, 240, 90, 90, 60);\n      this.drawBoard(context);\n    };\n\n    canvas.addEventListener('mousemove', e => {\n      var xBlock = 0;\n      var yBlock = 0;\n\n      if (e.offsetX < 840) {\n        xBlock = Math.floor(e.offsetX / 30 % 100);\n      } else if (e.offsetX < 840) {\n        xBlock = parseInt(e.offsetX.toString().substr(0, 0));\n      }\n\n      if (e.offsetY < 540) {\n        yBlock = Math.floor(e.offsetY / 30 % 100);\n      } else if (e.offsetY < 540) {\n        yBlock = parseInt(e.offsetY.toString().substr(0, 0));\n      }\n\n      this.state.overBlock = xBlock + ',' + yBlock;\n      this.state.datapixel.forEach(doc => {\n        if (this.state.overBlock == doc[0]) {\n          this.state.datoMostrar = doc[3];\n        }\n      });\n    });\n    canvas.addEventListener('mousedown', e => {\n      var xBlock = 0;\n      var yBlock = 0;\n\n      if (e.offsetX < 840) {\n        xBlock = Math.floor(e.offsetX / 30 % 100);\n      } else if (e.offsetX < 840) {\n        xBlock = parseInt(e.offsetX.toString().substr(0, 0));\n      }\n\n      if (e.offsetY < 540) {\n        yBlock = Math.floor(e.offsetY / 30 % 100);\n      } else if (e.offsetY < 540) {\n        yBlock = parseInt(e.offsetY.toString().substr(0, 0));\n      } // Need to get block position on grid\n\n\n      var existe = false;\n      var blockPosition = xBlock + ',' + yBlock;\n      console.log(blockPosition);\n      console.log(this.state.pixelesPintados);\n      this.state.pixelesPintados.forEach(pixel => {\n        if (pixel == blockPosition) {\n          console.log('existe');\n          this.handleModalDataShow();\n          console.log(this.showDataModal);\n          existe = true;\n        }\n      });\n\n      if (existe == false) {\n        if (blockPosition) {\n          context.fillRect(xBlock * 30, yBlock * 30, 30, 30);\n          this.state.selectedPixel.push(blockPosition);\n          this.state.pixelesPintados.push(blockPosition);\n          console.log(blockPosition);\n        }\n      }\n    });\n    this.drawBoard(context);\n  }\n\n  boton(data) {\n    var name = document.getElementById(\"name\").value;\n    var phone = document.getElementById(\"phone\").value;\n    var email = document.getElementById(\"email\").value;\n    console.log(name, phone, email);\n    var info = {\n      name: name,\n      phone: phone,\n      email: email\n    };\n\n    for (let i = 0; i < data.length; i++) {\n      addPixel(data[i], info);\n    } // var url = 'https://wa.me/+543571311605/?text=Deseo+comprar+los+metros+cuadrados+en+las+posiciones+' + data;\n    //  window.open(url, '_blank');\n\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"heading\", {\n        style: {\n          color: \"white\",\n          fontSize: \"30px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        action: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Nombre\",\n          id: \"name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Celular\",\n          id: \"phone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Email\",\n          id: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          color: \"red\"\n        },\n        onClick: () => this.boton(this.state.selectedPixel),\n        children: \"BOTON DE RESERVA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"heading\", {\n        style: {\n          color: \"white\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"white\"\n        },\n        children: \"(Grid will be replaced by user-generated images after launch)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: true,\n        onHide: this.handleModalDataClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Modal heading\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: \"Woohoo, you're reading this text in a modal!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: this.handleModalDataClose,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: this.handleModalDataClose,\n            children: \"Save Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: \"canvasRef\",\n        width: \"840\",\n        height: \"540\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Canvas;","map":{"version":3,"sources":["C:/Users/Usuario/Basquet-Central/Basquet-Central/frontend/src/components/Canvas.jsx"],"names":["React","Button","Modal","getPixeles","addPixel","Canvas","Component","constructor","props","handleModalDataClose","showDataModal","handleModalDataShow","canvasRef","createRef","showFormModal","state","selectedPixel","pixelesPintados","datapixel","overBlock","imgRepit","datoMostrar","drawBoard","context","x","moveTo","lineTo","y","strokeStyle","stroke","componentDidMount","canvas","refs","getContext","translate","background","Image","src","onload","drawImage","pixeles","midata","forEach","doc","push","id","resultado","split","data","info","imagen","JSON","stringify","separar","console","log","img","fillRect","addEventListener","e","xBlock","yBlock","offsetX","Math","floor","parseInt","toString","substr","offsetY","existe","blockPosition","pixel","boton","name","document","getElementById","value","phone","email","i","length","render","color","fontSize"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport '../App.css';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { getPixeles, addPixel } from '../services/pixeles'\r\n\r\n\r\nclass Canvas extends React.Component {  \r\n  \r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.canvasRef = React.createRef();\r\n    this.showDataModal=false;\r\n    this.showFormModal=false;\r\n    this.state = {\r\n      selectedPixel: [],\r\n      pixelesPintados:[],\r\n      datapixel:[],\r\n      overBlock:'',\r\n      imgRepit:[],\r\n      datoMostrar:'aasdasdasd',\r\n     \r\n\r\n    };\r\n  }\r\n\r\n  handleModalDataClose = () => {this.showDataModal = false};\r\n  handleModalDataShow = () => {this.showDataModal = true};\r\n  \r\n  drawBoard(context) {\r\n    for (var x = 0; x < 840; x++) {\r\n      context.moveTo(x*30, 0); \r\n      context.lineTo(x*30, 540); \r\n    } \r\n\r\n    for (var y = 0; y < 540; y++) {\r\n      context.moveTo(0, 30*y); \r\n      context.lineTo(840, 30*y); \r\n    }\r\n\r\n    context.strokeStyle = \"white\";\r\n    context.stroke();\r\n  }\r\n  \r\n  \r\n  async componentDidMount() {\r\n    const canvas = this.refs.canvasRef\r\n    const context = canvas.getContext('2d')\r\n  \r\n    // Fix to make lines *not* blurry\r\n    context.translate(0.5, 0.5);\r\n\r\n    this.drawBoard(context);\r\n    var background = new Image(); \r\n    background.src = 'https://previews.123rf.com/images/tonygers/tonygers1401/tonygers140100028/25082143-una-vista-a%C3%A9rea-de-una-cancha-de-baloncesto-completan-con-las-marcas-.jpg'; \r\n    background.onload = () => {\r\n      context.drawImage(background,0,0); \r\n      this.drawBoard(context);\r\n    }\r\n\r\n        let  pixeles = await getPixeles()\r\n        let midata=\"\"\r\n        \r\n      pixeles.forEach(doc =>{\r\n        this.state.pixelesPintados.push(doc.id)\r\n        let resultado = doc.id.split(\",\")\r\n        this.state.imgRepit.push(doc.data().info.imagen)\r\n        \r\n        midata= (doc.id+':'+JSON.stringify(doc.data()))\r\n        let separar = midata.split(\":\")\r\n        console.log (separar)\r\n        this.state.datapixel.push(separar);\r\n\r\n\r\n          if(doc.data().info.imagen){\r\n          var img = doc.data().info.imagen\r\n\r\n            var background = new Image(); \r\n            background.src = img\r\n            background.onload = () => {\r\n            context.drawImage(background,resultado[0]*30,resultado[1]*30,30,30);\r\n            }\r\n          }\r\n\r\n        context.fillRect(resultado[0]*30,resultado[1]*30, 30, 30)\r\n      })\r\n            \r\n      var background = new Image(); \r\n      background.src = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAHwAwQMBIgACEQEDEQH/xAAZAAADAQEBAAAAAAAAAAAAAAABAgMABAb/xAAiEAEBAAIBBQADAQEAAAAAAAAAAQISEQMEExRRIUFhMZH/xAAYAQEBAQEBAAAAAAAAAAAAAAAAAQIGBf/EABcRAQEBAQAAAAAAAAAAAAAAAAARIQH/2gAMAwEAAhEDEQA/APSMzOFe8zM35UYRmJuOREx4PMRmIJ8NqroOiCWozD6rMBuNv6VKhZy2q+oXBFqGrcLaBoCXAK3ELiCbHuIcKtKzflvyFZhAGZmQZhGQShweQZD4xQvHIzE8xPMRkkxNMVJieYIlS0HRaYfw0wEqGjaOjQ2gVy6No6tA0CuW4Ben+HVoW4KVy3AtwdNxLcUWua4kuLpuJLiNVC48hZwrlCWKJ0D2F4FBmZFMeQMZ/wAOrI4w8hcVIA4xSQMVMUZ6OMPji2KkVkJiaYGxh5EZJMB0VkNqiVHQNF9S2BULiS4r2FsVXPcSZRfKEsGnPYTKL5RLKC8SsTyiuRMhpKwilLxyKVh0rKtHnk0TlPKIpipEZVMagtifFKU8yGe8XxPjUMclJkMrynlc8yPMiI6JR2QmY7EZi+xbUtg3Qh7SWluRbkq8G0mVC5EyyFDKp0bkS0a4WkyHKktGgpKNpLRW5YGFYZSiKeVTGoy8G25qpF9jTJzzI0yRI6ZkaZuaZGmYzHVMzTNy7jMxI6vIO7l3HcI6dw3c+7bhF7mW5o3Pgu4Ra5EuSdzJcxYpciZZEuQc8qsNaTK8Bci2itaDAKIMwrMIBWEG5Qo7DMi8sIfk0vCf+NypFdhmSPLcoRbcd0OW5BeZtvwjMrP8bZUitzDZLluRYpci3InLIQ1yDb8hy3ICDcsKzM3HNWFZjagQrq9aU07XEZ1DeQY0J2uHyGnadP5G8ozqozoztOn8h52mE/UJOsPnDVPU6d/UH0+l8ifnHziarOy6XyGnY9L5EZ3Fb2ENW9Lo/IPo9H5Eb3HAeyJOr+j0fkb0ul8iHst7ITq17LpfIW9l0vkT9hvY/qrpvT6XyBez6XyF9gPOGt6fT+QL2nT+RvOF6wuhe06fyEvaYfIfzB5g0nq4lvbSf4peqXyKt6n6/wDWU8jIuuXa/W3pGGoff+jvU8QUW3byIshFvJfreS/UWCLTqX6bycfv8oSspFfJfreS/UWCLeS/W8l+oshFvJfreS/UWUi3kreS/UWQi3kbdFv2pFfJ/W3ToIRTettSMEPtfrEAWP/Z'; \r\n      background.onload = () => {\r\n        context.drawImage(background,240,90,90,60); \r\n        this.drawBoard(context);\r\n      } \r\n\r\n\r\n\r\n\r\ncanvas.addEventListener('mousemove',(e)=>{\r\n  var xBlock = 0; \r\n  var yBlock = 0; \r\n\r\n  if (e.offsetX < 840) {\r\n    xBlock = Math.floor((e.offsetX/30) % 100); \r\n  }\r\n  else if (e.offsetX <  840) {\r\n    xBlock = parseInt(e.offsetX.toString().substr(0,0));\r\n  }\r\n\r\n  if (e.offsetY < 540) {\r\n    yBlock = Math.floor((e.offsetY/30) % 100);\r\n  }\r\n  else if (e.offsetY < 540) {\r\n    yBlock = parseInt(e.offsetY.toString().substr(0,0));\r\n  }\r\n\r\n   this.state.overBlock = xBlock+','+yBlock ;\r\n\r\n  this.state.datapixel.forEach(doc =>{\r\n    if (this.state.overBlock== doc[0]){\r\n     this.state.datoMostrar = doc[3]\r\n    }\r\n    \r\n})\r\n\r\n\r\n})\r\n\r\n    canvas.addEventListener('mousedown', (e)=> {\r\n\r\n      var xBlock = 0; \r\n      var yBlock = 0; \r\n\r\n      if (e.offsetX < 840) {\r\n        xBlock = Math.floor((e.offsetX/30) % 100); \r\n      }\r\n      else if (e.offsetX <  840) {\r\n        xBlock = parseInt(e.offsetX.toString().substr(0,0));\r\n      }\r\n\r\n      if (e.offsetY < 540) {\r\n        yBlock = Math.floor((e.offsetY/30) % 100);\r\n      }\r\n      else if (e.offsetY < 540) {\r\n        yBlock = parseInt(e.offsetY.toString().substr(0,0));\r\n      }\r\n\r\n      // Need to get block position on grid\r\n      var existe = false\r\n      var blockPosition = xBlock+','+yBlock ;\r\n      console.log(blockPosition)\r\n      console.log(this.state.pixelesPintados)\r\n      this.state.pixelesPintados.forEach(pixel =>{\r\n         \r\n         if(pixel==blockPosition){\r\n          console.log('existe')\r\n          this.handleModalDataShow()\r\n          console.log(this.showDataModal)\r\n          existe=true\r\n         }\r\n      })\r\n      if(existe==false){\r\n      if(blockPosition){\r\n        context.fillRect(xBlock * 30, yBlock * 30 , 30, 30)\r\n        this.state.selectedPixel.push(blockPosition)\r\n        this.state.pixelesPintados.push(blockPosition)\r\n        console.log(blockPosition);\r\n        \r\n      }\r\n    }\r\n\r\n    })\r\n  \r\n    this.drawBoard(context);\r\n  }\r\n\r\n   boton(data){\r\n    var name = document.getElementById(\"name\").value;\r\n    var phone = document.getElementById(\"phone\").value;\r\n    var email = document.getElementById(\"email\").value;\r\n    console.log(name,phone,email)\r\n    var info ={ \r\n      name:name,\r\n      phone:phone,\r\n      email:email}\r\n    for(let i=0;i<data.length;i++){\r\n \r\n      addPixel(data[i],info)\r\n    }\r\n    // var url = 'https://wa.me/+543571311605/?text=Deseo+comprar+los+metros+cuadrados+en+las+posiciones+' + data;\r\n    //  window.open(url, '_blank');\r\n \r\n  }\r\n  \r\n  \r\n  render() {\r\n    return (\r\n      <div>\r\n        <heading style={{color: \"white\" , fontSize:\"30px\"}}></heading>\r\n        <form action=\"\">\r\n        <input type=\"text\" placeholder='Nombre' id=\"name\"/>\r\n        <input type=\"text\" placeholder='Celular' id=\"phone\" />\r\n        <input type=\"text\" placeholder='Email' id=\"email\"/>\r\n        \r\n        </form>\r\n        <button style={{color:\"red\"}} onClick={()=>this.boton(this.state.selectedPixel)}>BOTON DE RESERVA</button>\r\n        <heading style={{color: \"white\"}}></heading>\r\n        \r\n        <p style={{color: \"white\"}}>(Grid will be replaced by user-generated images after launch)</p>\r\n        \r\n        <Modal show={true} onHide={this.handleModalDataClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Modal heading</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>Woohoo, you're reading this text in a modal!</Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={this.handleModalDataClose}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={this.handleModalDataClose}>\r\n              Save Changes\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n\r\n        <canvas ref=\"canvasRef\" width='840' height='540'  />\r\n        \r\n      </div>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\nexport default Canvas"]},"metadata":{},"sourceType":"module"}